<div class="login-wrapper">
  <div class="login-card">
    <div class="brand">
      <div class="logo">
        <span class="material-icons-round">security</span>
      </div>
      <h2>MedNex Enterprise</h2>
      <p>Secure Hospital Management Login</p>
    </div>

    <form [formGroup]="loginForm" (ngSubmit)="login()">
      <div class="error-alert" *ngIf="error">
        {{ error }}
      </div>

      <div class="input-group" [class.error]="loginForm.get('email')?.touched && loginForm.get('email')?.invalid">
        <label>Email</label>
        <div class="input-wrapper">
          <span class="material-icons-round input-icon">email</span>
          <input type="email" placeholder="name@hospital.com" formControlName="email">
        </div>
        <div class="error-msg" *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid">
          Please enter a valid hospital email
        </div>
      </div>

      <div class="input-group" [class.error]="loginForm.get('password')?.touched && loginForm.get('password')?.invalid">
        <label>Password</label>
        <div class="input-wrapper">
          <span class="material-icons-round input-icon">lock</span>
          <input [type]="showPassword() ? 'text' : 'password'" placeholder="Enter your password"
            formControlName="password">
          <button type="button" class="password-toggle" (click)="showPassword.set(!showPassword())">
            <span class="material-icons-round">{{ showPassword() ? 'visibility_off' : 'visibility' }}</span>
          </button>
        </div>
        <div class="error-msg" *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid">
          Password must be at least 6 characters
        </div>
      </div>

      <button type="submit" class="btn-login" [disabled]="loading">
        <span *ngIf="!loading">Sign In</span>
        <span *ngIf="loading" class="spinner-spinner">
          <span class="material-icons-round spinning">sync</span>
          Signing In...
        </span>
      </button>

      <div class="helper-text">
        <span (click)="showSupportModal.set(true)">Forgot password? Contact IT Support</span>
      </div>
    </form>
  </div>

  <!-- IT Support Modal -->
  <div class="modal-overlay" *ngIf="showSupportModal()" (click)="showSupportModal.set(false)">
    <div class="modal-card" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>IT Support Center</h3>
        <button class="close-btn" (click)="showSupportModal.set(false)">&times;</button>
      </div>
      <div class="modal-body">
        <div class="support-icon">
          <span class="material-icons-round">support_agent</span>
        </div>
        <p>For security reasons, password resets must be handled by our enterprise IT team.</p>

        <div class="contact-details">
          <div class="contact-item">
            <label>Internal Support Email:</label>
            <a href="mailto:it.support@mednex.enterprise">it.support@mednex.enterprise</a>
          </div>
          <div class="contact-item">
            <label>Support Hotline:</label>
            <span>+1 (800) MED-HELP</span>
          </div>
        </div>

        <p class="hours">Support available: 24/7 for Medical Staff</p>
      </div>
      <div class="modal-footer">
        <button class="btn-primary" (click)="showSupportModal.set(false)">Understood</button>
      </div>
    </div>
  </div>
</div>